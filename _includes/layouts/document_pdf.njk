{% set currentLang = lang or "en" %}

{# Determine text direction safely #}
{% if dir %}
  {% set currentDir = dir %}
{% elseif currentLang == "ar" %}
  {% set currentDir = "rtl" %}
{% else %}
  {% set currentDir = "ltr" %}
{% endif %}

<!DOCTYPE html>
<html lang="{{ currentLang }}" dir="{{ currentDir }}">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% if title %}{{ title }} â€“ {% endif %}Document Viewer</title>

  {# Use your global stylesheet only (NO inline styles) #}
  <link rel="stylesheet" href="/assets/style.css" />
</head>

<body>

  <main class="site-main">
    <div class="doc-page-header">
      <h1 class="doc-page-title">{{ title }}</h1>
    </div>

    <section class="doc-viewer">
      <div class="doc-grid">

        <div
          class="pdf-canvas"
          id="pdfHost"
          data-pdf="{{ doc.pdf }}"
          data-annotations="{{ doc.annotations }}"
        >
          <div class="doc-tooltip" id="docTooltip" role="tooltip" hidden></div>
          <div class="doc-flyout" id="docFlyout" hidden></div>

          <div id="pdfDebug"></div>
        </div>

        <aside class="doc-panel" aria-live="polite">
        {# 
          <div class="doc-panel__inner">
            <h2 class="doc-panel__title">{{ title }}</h2>
            <p class="doc-panel__intro">
              Select a highlight on the document to read more.
            </p>
          </div>
        #}

            <div class="doc-panel__contentBox" id="docPanelBox" style="cursor:pointer">
              <div class="doc-panel__content" id="docPanelContent">
                <p>Go to first highlight</p>
              </div>
            </div>
        </aside>

      </div>
    </section>
  </main>

  <!-- PDF.js (CDN) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <script src="/assets/scripts/pdf-viewer.js" defer></script>
 

</body>
 <script> 
const docpanel = document.getElementById("docPanelBox");
docpanel.onclick = function() {
      const element = document.getElementsByClassName("doc-hotspot")[0];
      element.scrollIntoView({
      behavior: "auto",
      block: "center",
      inline: "center"
    });
document.getElementById("docPanelContent").textContent = "Click the highlight";
docpanel.onclick = function() {};
docpanel.style.cursor = "default";
}
  </script>
</html>
